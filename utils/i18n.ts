import { useAppSettings } from '@/contexts/app-settings';
import type { AppLanguage } from '@/utils/app-settings-storage';

const messages = {
  ko: {
    tabs: {
      bible: '성경',
      mypage: '마이페이지',
      settings: '설정',
    },
    common: {
      back: '뒤로',
      copy: '복사',
    },
    settings: {
      title: '설정',
      systemLanguage: '시스템 언어',
      theme: '테마',
      lightMode: '라이트 모드',
      darkMode: '다크 모드',
      languageSelect: '언어 선택',
    },
    mypage: {
      title: '마이페이지',
      favoritesMenu: '관심 성경 구절 목록',
      memosMenu: '묵상 메모 목록',
      favoritesTitle: '관심 성경 구절',
      memosTitle: '묵상 메모 목록',
      emptyFavorites: '등록된 관심 구절이 없습니다.',
      emptyMemos: '등록된 메모가 없습니다.',
      memoDetailTitle: '메모 상세',
      editMemo: '수정',
      deleteMemo: '삭제',
      memoNotFound: '메모를 찾을 수 없습니다.',
      untitled: '(제목 없음)',
      verseText: '성경 구절',
      content: '내용',
      noContent: '(내용 없음)',
      deleteFavorite: '삭제',
      deleteFavoriteConfirm: '이 관심 구절을 삭제하시겠습니까?',
      goToVerse: '해당 성경으로 이동하시겠습니까?',
      goToVerseConfirm: '이동',
      goToVerseCancel: '취소',
      deleteMemoConfirm: '이 메모를 삭제하시겠습니까?',
      deleteConfirm: '삭제',
      deleteCancel: '취소',
      prayersMenu: '기도 목록',
      prayersTitle: '기도 목록',
      emptyPrayers: '등록된 기도가 없습니다.',
      addPrayer: '기도 등록',
      prayerDetailTitle: '기도 상세',
      prayerNotFound: '기도를 찾을 수 없습니다.',
      prayerRequester: '기도 부탁자',
      prayerTarget: '기도 대상자',
      prayerContent: '기도 내용',
      prayerContentPlaceholder: '기도 내용을 입력하세요',
      deletePrayerConfirm: '이 기도를 삭제하시겠습니까?',
      deletePrayerContentConfirm: '이 기도 내용을 삭제하시겠습니까?',
      editPrayer: '수정',
      deletePrayer: '삭제',
      prayerForTargetFormat: '{target}을 위한 기도',
      prayerRequestedForFormat: '{requester}이 기도부탁한 {target}을 위한 기도',
      prayerNameSuffix: '님',
      plansMenu: '성경읽기표 & 성경읽기 계획',
      plansTitle: '성경읽기표',
      emptyPlans: '등록된 읽기표가 없습니다.',
      addPlan: '읽기표 만들기',
      planDetailTitle: '읽기표 상세',
      planNotFound: '읽기표를 찾을 수 없습니다.',
      deletePlanConfirm: '이 읽기표를 삭제하시겠습니까?',
      editPlan: '수정',
      deletePlan: '삭제',
      planPeriod: '기간',
      planGoal: '목표',
      planProgress: '진행도',
      planDaysRemaining: '일 남았습니다.',
      planChaptersPerDay: '하루에 {count}장씩 읽으세요!',
      planStartDate: '시작일',
      planEndDate: '종료일',
      planSelectBooks: '읽을 성경 선택',
      planNamePlaceholder: '읽기표 이름을 입력하세요',
      addMode: '모드',
      savePlan: '저장',
      checkAll: '모두체크',
      planNoSelectedBooks: '선택된 성경이 없습니다.',
    },
    planDrawer: {
      addTitle: '읽기표 만들기',
      editTitle: '읽기표 수정',
      save: '저장',
      cancel: '취소',
      planNameLabel: '읽기표 이름',
      planNamePlaceholder: '이름을 입력하세요',
      startDateLabel: '시작일',
      endDateLabel: '종료일',
      selectBooksLabel: '읽을 성경 선택',
    },
    prayerDrawer: {
      addTitle: '기도 등록',
      editTitle: '기도 수정',
      save: '저장',
      cancel: '취소',
      requesterLabel: '기도 부탁자',
      requesterPlaceholder: '이름을 입력하세요',
      targetLabel: '기도 대상자',
      targetPlaceholder: '이름을 입력하세요',
      contentLabel: '기도 내용',
      contentPlaceholder: '기도 내용을 입력하세요',
      addContent: '내용 추가',
    },
    memoDrawer: {
      title: '묵상 메모',
      editTitle: '메모 수정',
      save: '저장',
      cancel: '취소',
      titleLabel: '제목',
      titlePlaceholder: '메모 제목 (선택)',
      verseTextLabel: '성경 구절',
      contentLabel: '내용',
      contentPlaceholder: '묵상 내용을 입력하세요',
    },
    toast: {
      copySuccess: '복사했어요!',
      favoriteAdded: '관심 목록에 등록했어요!',
      favoriteRemoved: '관심 목록에서 삭제했어요!',
      memoAdded: '메모를 등록했어요!',
      memoUpdated: '메모를 수정했어요!',
      memoDeleted: '메모를 삭제했어요!',
      prayerAdded: '기도를 등록했어요!',
      prayerUpdated: '기도를 수정했어요!',
      prayerDeleted: '기도를 삭제했어요!',
      prayerContentDeleted: '기도 내용을 삭제했어요!',
      planAdded: '읽기표를 등록했어요!',
      planUpdated: '읽기표를 수정했어요!',
      planDeleted: '읽기표를 삭제했어요!',
    },
    bibleDrawer: {
      oldTestament: '구약',
      newTestament: '신약',
      category: {
        pentateuch: '모세오경',
        history: '역사서',
        poetry: '시가서',
        prophecy: '예언서',
        gospels: '복음서',
        epistles: '서신서',
      },
    },
  },
  en: {
    tabs: {
      bible: 'Bible',
      mypage: 'My Page',
      settings: 'Settings',
    },
    common: {
      back: 'Back',
      copy: 'Copy',
    },
    settings: {
      title: 'Settings',
      systemLanguage: 'System language',
      theme: 'Theme',
      lightMode: 'Light mode',
      darkMode: 'Dark mode',
      languageSelect: 'Select language',
    },
    mypage: {
      title: 'My Page',
      favoritesMenu: 'Favorite verses',
      memosMenu: 'Meditation memos',
      favoritesTitle: 'Favorite verses',
      memosTitle: 'Meditation memos',
      emptyFavorites: 'No favorite verses yet.',
      emptyMemos: 'No memos yet.',
      memoDetailTitle: 'Memo detail',
      editMemo: 'Edit',
      deleteMemo: 'Delete',
      memoNotFound: 'Memo not found.',
      untitled: '(Untitled)',
      verseText: 'Bible verses',
      content: 'Content',
      noContent: '(No content)',
      deleteFavorite: 'Delete',
      deleteFavoriteConfirm: 'Are you sure you want to remove this verse from favorites?',
      goToVerse: 'Would you like to go to this Bible verse?',
      goToVerseConfirm: 'Go',
      goToVerseCancel: 'Cancel',
      deleteMemoConfirm: 'Are you sure you want to delete this memo?',
      deleteConfirm: 'Delete',
      deleteCancel: 'Cancel',
      prayersMenu: 'Prayer list',
      prayersTitle: 'Prayer list',
      emptyPrayers: 'No prayers yet.',
      addPrayer: 'Add prayer',
      prayerDetailTitle: 'Prayer detail',
      prayerNotFound: 'Prayer not found.',
      prayerRequester: 'Requester',
      prayerTarget: 'Prayer target',
      prayerContent: 'Prayer content',
      prayerContentPlaceholder: 'Enter prayer content',
      deletePrayerConfirm: 'Are you sure you want to delete this prayer?',
      deletePrayerContentConfirm: 'Are you sure you want to delete this prayer content?',
      editPrayer: 'Edit',
      deletePrayer: 'Delete',
      prayerForTargetFormat: 'Prayer for {target}',
      prayerRequestedForFormat: 'Prayer for {target} requested by {requester}',
      prayerNameSuffix: '',
      plansMenu: 'Bible Reading Chart & Plan',
      plansTitle: 'Bible Reading Chart',
      emptyPlans: 'No reading plans yet.',
      addPlan: 'Create Reading Chart',
      planDetailTitle: 'Plan Detail',
      planNotFound: 'Plan not found.',
      deletePlanConfirm: 'Are you sure you want to delete this plan?',
      editPlan: 'Edit',
      deletePlan: 'Delete',
      planPeriod: 'Period',
      planGoal: 'Goal',
      planProgress: 'Progress',
      planDaysRemaining: 'days remaining.',
      planChaptersPerDay: 'Read {count} chapters per day!',
      planStartDate: 'Start Date',
      planEndDate: 'End Date',
      planSelectBooks: 'Select books to read',
      planNamePlaceholder: 'Enter plan name',
      addMode: 'Mode',
      savePlan: 'Save',
      checkAll: 'Check All',
      planNoSelectedBooks: 'No books selected.',
    },
    planDrawer: {
      addTitle: 'Create Reading Chart',
      editTitle: 'Edit Reading Chart',
      save: 'Save',
      cancel: 'Cancel',
      planNameLabel: 'Plan Name',
      planNamePlaceholder: 'Enter name',
      startDateLabel: 'Start Date',
      endDateLabel: 'End Date',
      selectBooksLabel: 'Select books to read',
    },
    prayerDrawer: {
      addTitle: 'Add prayer',
      editTitle: 'Edit prayer',
      save: 'Save',
      cancel: 'Cancel',
      requesterLabel: 'Requester',
      requesterPlaceholder: 'Enter name',
      targetLabel: 'Prayer target',
      targetPlaceholder: 'Enter name',
      contentLabel: 'Prayer content',
      contentPlaceholder: 'Enter prayer content',
      addContent: 'Add content',
    },
    memoDrawer: {
      title: 'Meditation Memo',
      editTitle: 'Edit Memo',
      save: 'Save',
      cancel: 'Cancel',
      titleLabel: 'Title',
      titlePlaceholder: 'Memo title (optional)',
      verseTextLabel: 'Bible verses',
      contentLabel: 'Content',
      contentPlaceholder: 'Write your meditation notes',
    },
    toast: {
      copySuccess: 'Copied!',
      favoriteAdded: 'Added to favorites!',
      favoriteRemoved: 'Removed from favorites!',
      memoAdded: 'Memo added!',
      memoUpdated: 'Memo updated!',
      memoDeleted: 'Memo deleted!',
      prayerAdded: 'Prayer added!',
      prayerUpdated: 'Prayer updated!',
      prayerDeleted: 'Prayer deleted!',
      prayerContentDeleted: 'Prayer content deleted!',
      planAdded: 'Reading plan added!',
      planUpdated: 'Reading plan updated!',
      planDeleted: 'Reading plan deleted!',
    },
    bibleDrawer: {
      oldTestament: 'Old Testament',
      newTestament: 'New Testament',
      category: {
        pentateuch: 'Pentateuch',
        history: 'Historical Books',
        poetry: 'Poetry/Wisdom',
        prophecy: 'Prophetic Books',
        gospels: 'Gospels',
        epistles: 'Epistles',
      },
    },
  },
} as const;

function getByPath(obj: unknown, path: string): string | undefined {
  const value = path.split('.').reduce<unknown>((acc, key) => {
    if (typeof acc !== 'object' || acc === null) return undefined;
    return (acc as Record<string, unknown>)[key];
  }, obj);
  return typeof value === 'string' ? value : undefined;
}

export function t(lang: AppLanguage, key: string): string {
  return getByPath(messages[lang], key) ?? getByPath(messages.ko, key) ?? key;
}

export function useI18n() {
  const { appLanguage } = useAppSettings();
  return {
    t: (key: string) => t(appLanguage, key),
  };
}

